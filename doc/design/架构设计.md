## 设计

我们采用模块化设计，包括词法分析、语法分析、双向类型检查（类型推导+类型检查）、解释、编译五大模块组成。

#### 词法分析

词法分析阶段是编译过程的第一个阶段。将源代码转换为一系列标记（tokens），每个标记代表一个独立的语法单元。

这个阶段的任务是读入源程序，即对构成源程序的字符流进行扫描然后根据构词规则识别单词(也称单词符号或符号)。词法分析程序可以使用lex等工具自动生成。

- 删除注释和空格
- 标识关键字、符号、标识符等

#### 语法分析

语法分析是编译过程的一个逻辑阶段。语法分析的任务是在词法分析的基础上将单词序列组合成各类语法短语，如“程序”，“语句”，“表达式”等等。语法分析程序判断源程序在结构上是否正确，源程序的结构由上下文无关文法描述。

- 确定语法规则
- 判断是否遵循语法规则
- 构建 AST

#### 双向类型检查

通过分析代码，确定表达式和变量的数据类型。该模块通常包括以下功能：

- 推导表达式的类型
- 检查变量之间的类型一致性
- 错误类型检测和报告

#### 解释模块

将 AST 转换为可执行的代码，并创建解释器来执行它们。

- 遍历 AST 并执行相应的操作
- 实现内置函数
- 管理变量和作用域

#### 编译模块

将 AST 转换为机器码或字节码。

- 生成目标代码
- 优化目标代码
- 管理内存和资源



