### 词法分析&语法分析

直接用`ocamllex`生成。

用`menhir`这一$\mathrm{LR}(1)$生成器生成。

### 语法实现

- 围绕基础类型的运算
- 条件判断
- 局部变量（let 结构）
- 高阶函数及其调用，递归
- 复合结构相关的操作（读取、加入、删除、替换字段）

### 类型系统

我们的基础是经典的 Hindley-Milner 类型系统，这一类型系统能方便的支持全局类型推导，但是也能支持基本泛型（也就是 let-polymorphism）等高级特性。

为了在类型系统层面支持可扩展编程，我们引入了 row polymorphism 的扩展，具体设计采用 Daan Leijen 在 2005 年发表的论文 Extensible records with scoped labels 中的方案，能非常好的融入 HM 类型系统而不破坏其本来的特性，对类型推导也颇为友好。

实际实现里为了优化类型推导中合一的性能，需要用并查集这一数据结构。

### 解释器&编译器

实现用的是经典的`eval/apply`模式。

目前不计划实现复杂的编译优化，只是简单地将语言翻译成某一种 IR。